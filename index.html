<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>SAHASARARAA</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<style>
  :root{--primary:#004d40;--gold:#FFD700;--muted:#666}
  body{font-family:Inter,Arial,Helvetica,sans-serif;margin:0;background:#fff;color:#111}
  header{background:var(--primary);color:#fff;padding:12px 18px;display:flex;align-items:center;justify-content:space-between}
  header h1{margin:0;font-size:20px}
  a{color:inherit;text-decoration:none}
  .container{max-width:1100px;margin:18px auto;padding:0 12px}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}
  .card{border:1px solid #eee;border-radius:8px;padding:10px;background:#fafafa}
  img{max-width:100%;border-radius:6px}
  .btn{background:var(--primary);color:#fff;border:none;padding:8px 10px;border-radius:6px;cursor:pointer}
  input,select,textarea{padding:8px;border-radius:6px;border:1px solid #ddd;width:100%;box-sizing:border-box;margin:6px 0}
  .muted{color:var(--muted)}
  .flex{display:flex;gap:8px;align-items:center}
  
  /* Hero Slider */
  .hero-slider { position: relative; width: 100%; height: 400px; overflow: hidden; border-radius:10px; margin-bottom:24px; }
  .hero-slide { width:100%; height:100%; background-size:cover; background-position:center; position:absolute; top:0; left:0; transition:opacity 1s ease; opacity:0; }
  .hero-slide.active { opacity:1; }
  .hero-slide .overlay { position:absolute; bottom:30px; left:30px; color:var(--gold); background: rgba(0,77,64,0.6); padding:12px 18px; border-radius:6px; font-size:1.5rem; font-weight:bold; }

  /* Categories Section */
  .categories { display:flex; gap:12px; margin-bottom:24px; flex-wrap:wrap; }
  .category { flex:1; min-width:200px; height:180px; background-size:cover; background-position:center; border-radius:10px; display:flex; align-items:center; justify-content:center; color:var(--gold); font-size:1.5rem; font-weight:bold; cursor:pointer; transition:transform 0.3s ease; text-align:center; }
  .category:hover { transform:scale(1.05); }

  /* Trending Products Section */
  .trending-section { background:var(--primary); color:#fff; padding:20px; border-radius:10px; margin-bottom:24px; }
  .trending-section h2 { color:var(--gold); margin-bottom:12px; text-align:center; }
  .trending-section .grid { display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); }
  .trending-section .card { background:#fafafa; color:#111; border-radius:8px; padding:10px; }

  /* Hamburger Menu */
  .hamburger { cursor:pointer; width:30px; height:22px; display:flex; flex-direction:column; justify-content:space-between; }
  .hamburger div { height:4px; background:#fff; border-radius:2px; }
  .side-menu { position:fixed; top:0; left:-250px; width:250px; height:100%; background:var(--primary); color:#fff; transition:left 0.3s ease; padding:20px; display:flex; flex-direction:column; gap:16px; z-index:1000; }
  .side-menu.show { left:0; }
  .side-menu a { color:#fff; font-size:16px; text-decoration:none; }
  .side-menu hr { border:0.5px solid #555; }

  /* Responsive adjustments */
  @media (max-width:768px){
    .hero-slider { height:250px; }
    .hero-slide .overlay { font-size:1.2rem; padding:8px 12px; bottom:20px; left:15px; }
    .category { min-height:140px; font-size:1.2rem; }
  }
  @media (max-width:480px){
    .hero-slider { height:180px; }
    .category { flex:1 1 100%; min-height:120px; font-size:1rem; }
  }
</style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:12px">
    <img src="/images/SASRS_logo.png" alt="Sahasrara Logo" style="height:50px;">
    <h1>SAHASARARAA</h1>
  </div>

  <!-- Hamburger Menu -->
  <div class="hamburger" id="hamburger">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <div class="side-menu" id="side-menu">
    <span id="header-welcome" style="font-size:14px"></span>
    <hr>
    <a href="#" id="menu-home">Home</a>
    <a href="#" id="menu-cart">Cart (<span id="menu-cart-count">0</span>)</a>
    <a href="#" id="menu-orders">Orders</a>
    <a href="#" id="menu-liked">Liked</a>
    <a href="#" id="menu-contact">Contact</a>
    <a href="#" id="menu-about">About</a>
    <a href="#" id="menu-auth">Login/Register</a>
  </div>
</header>

<div id="root" class="container"></div>

<script>
const e = React.createElement;
const API = '/api';

function setAuth(token, user){
  if(token) localStorage.setItem('token',token); else localStorage.removeItem('token');
  if(user) localStorage.setItem('user',JSON.stringify(user)); else localStorage.removeItem('user');
  window.appState.token = token;
  window.appState.user = user;
  updateHeader();
}
function getToken(){ return localStorage.getItem('token'); }
function getUser(){ return localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : null; }
window.appState = { token:getToken(), user:getUser() };

function updateHeader(){
  const welcome = document.getElementById('header-welcome');
  const authLink = document.getElementById('menu-auth');
  if(window.appState.user){
    welcome.textContent = 'Hi, ' + window.appState.user.name;
    authLink.textContent = 'Logout';
  } else {
    welcome.textContent = '';
    authLink.textContent = 'Login/Register';
  }
  fetchCartCount();
  updateMenuCartCount();
}

document.getElementById('menu-home').addEventListener('click', e=>{ e.preventDefault(); renderApp(); sideMenu.classList.remove('show'); });
document.getElementById('menu-cart').addEventListener('click', e=>{ e.preventDefault(); renderCart(); sideMenu.classList.remove('show'); });
document.getElementById('menu-orders').addEventListener('click', e=>{ e.preventDefault(); renderOrders(); sideMenu.classList.remove('show'); });
document.getElementById('menu-auth').addEventListener('click', e=>{ 
  e.preventDefault(); 
  if(window.appState.user){ setAuth(null,null); alert('Logged out'); renderApp(); } 
  else renderAuth(); 
  sideMenu.classList.remove('show'); 
});
document.getElementById('menu-liked').addEventListener('click', e=>{ e.preventDefault(); alert('Liked items page coming soon'); sideMenu.classList.remove('show'); });
document.getElementById('menu-contact').addEventListener('click', e=>{ e.preventDefault(); alert('Contact page coming soon'); sideMenu.classList.remove('show'); });
document.getElementById('menu-about').addEventListener('click', e=>{ e.preventDefault(); alert('About page coming soon'); sideMenu.classList.remove('show'); });

const hamburger = document.getElementById('hamburger');
const sideMenu = document.getElementById('side-menu');
hamburger.addEventListener('click', ()=>{ sideMenu.classList.toggle('show'); });

function fetchCartCount(){
  const el = document.getElementById('menu-cart-count');
  if(!window.appState.token){ el.textContent='0'; return; }
  fetch(API+'/cart',{ headers:{ 'Authorization':'Bearer '+window.appState.token }})
    .then(r=>r.json()).then(data=>{
      const n = data.items ? data.items.reduce((s,i)=>s+i.qty,0) : 0;
      el.textContent=n;
    }).catch(()=>el.textContent='0');
}

function updateMenuCartCount(){ fetchCartCount(); }

// The rest of your existing functions (renderApp, loadProducts, viewProduct, addToCart, buyNow, renderCart, renderOrders, renderCheckout, renderAuth) remain unchanged. 
// Just call updateHeader() in setAuth() to update the side menu as well.

updateHeader();
renderApp();
</script>
</body>
</html>
